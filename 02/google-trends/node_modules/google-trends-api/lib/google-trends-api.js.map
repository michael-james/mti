{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 0b3588b8ecdc368bbbbd","webpack:///./src/index.js","webpack:///./src/api.js","webpack:///./src/utilities.js","webpack:///external \"https\"","webpack:///external \"querystring\"","webpack:///./src/request.js"],"names":["interestByRegion","interestOverTime","relatedQueries","relatedTopics","searchType","reqObj","cb","cbFunc","obj","Error","Promise","reject","then","res","catch","err","isLessThan7Days","convertDateToString","formatTime","constructObj","formatResolution","getResults","date1","date2","Math","abs","d","shouldIncludeTime","month","getUTCMonth","toString","length","day","getUTCDate","year","getUTCFullYear","hour","getUTCHours","minute","getUTCMinutes","startTime","Date","endTime","temp","time","Array","isArray","keyword","hl","resolution","resolutions","isResValid","some","toUpperCase","map","path","pos","options","method","host","qs","req","JSON","stringify","comparisonItem","cat","tz","results","parsedResults","parse","slice","widgets","request","token","nextOptions","resolve","chunk","on","data","e","end"],"mappings":"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","file":"google-trends-api.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"https\"), require(\"querystring\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"google-trends-api\", [\"https\", \"querystring\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"google-trends-api\"] = factory(require(\"https\"), require(\"querystring\"));\n\telse\n\t\troot[\"google-trends-api\"] = factory(root[\"https\"], root[\"querystring\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_75__, __WEBPACK_EXTERNAL_MODULE_95__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0b3588b8ecdc368bbbbd\n **/","'use strict';\n\nimport api from './api';\n\nexport default {\n  interestByRegion: api('interest by region'),\n  interestOverTime: api('interest over time'),\n  relatedQueries: api('related queries'),\n  relatedTopics: api('related topics'),\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/","'use strict';\n\nimport { constructObj, getResults } from './utilities';\n\nexport default (searchType) => {\n  return (reqObj, cb) => {\n    const {\n      cbFunc,\n      obj,\n    } = constructObj(reqObj, cb);\n\n    if (obj instanceof Error) return Promise.reject(cbFunc(obj));\n\n    return getResults(searchType, obj)\n    .then(res => cbFunc(null, res))\n    .catch(err => Promise.reject(cbFunc(err)));\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/api.js\n **/","'use strict';\nimport request from './request';\n\nexport function isLessThan7Days(date1, date2) {\n  return (Math.abs(date2 - date1) / (24 * 60 * 60 * 1000)) < 7;\n};\n\nexport function convertDateToString(d, shouldIncludeTime) {\n  let month = (d.getUTCMonth() + 1).toString();\n\n  month = month.length < 2 ? '0' + month : month;\n  const day = d.getUTCDate().toString();\n  const year = d.getUTCFullYear().toString();\n  const hour = d.getUTCHours();\n  const minute = d.getUTCMinutes();\n\n  if (shouldIncludeTime) {\n    return `${year}-${month}-${day}T${hour}\\\\:${minute}\\\\:00`;\n  }\n\n  return `${year}-${month}-${day}`;\n};\n\nexport function formatTime(obj) {\n  if (obj.startTime && !(obj.startTime instanceof Date)) {\n    return new Error('startTime must be a Date object');\n  }\n  if (obj.endTime && !(obj.endTime instanceof Date)) {\n    return new Error('endTime must be a Date object');\n  }\n\n  if (obj.startTime && obj.endTime && obj.startTime > obj.endTime) {\n    const temp = obj.startTime;\n\n    obj.startTime = obj.endTime;\n    obj.endTime = temp;\n  }\n\n  if (!obj.endTime) obj.endTime = new Date();\n  if (!obj.startTime) obj.startTime = new Date('2004-01-01');\n\n  const shouldIncludeTime = isLessThan7Days(obj.startTime, obj.endTime);\n\n  const startTime = convertDateToString(obj.startTime, shouldIncludeTime);\n  const endTime = convertDateToString(obj.endTime, shouldIncludeTime);\n\n  obj.time = `${startTime} ${endTime}`;\n  return obj;\n};\n\nexport function constructObj(obj, cbFunc) {\n  if (typeof obj === 'function') cbFunc = obj;\n\n  if (!obj || !!obj && typeof obj !== 'object' || Array.isArray(obj)) {\n    obj = new Error('Must supply an object');\n  } else if (!obj.keyword) obj = new Error('Must have a keyword field');\n\n  if (!!cbFunc && typeof cbFunc !== 'function') {\n    obj = new Error('Callback function must be a function');\n  }\n\n  if (!obj.hl) obj.hl = 'en-US';\n\n  if (!cbFunc) {\n    cbFunc = (err, res) => {\n      if (err) return err;\n      return res;\n    };\n  }\n\n  obj = formatTime(obj);\n\n  return {\n    cbFunc,\n    obj,\n  };\n};\n\nexport function formatResolution(resolution = '') {\n  const resolutions = ['COUNTRY', 'REGION', 'CITY', 'DMA'];\n  const isResValid = resolutions.some((res) => {\n    return res === resolution.toUpperCase();\n  });\n\n  if (isResValid) return resolution.toUpperCase();\n  return '';\n}\n\nexport function getResults(searchType, obj) {\n  const map = {\n    'interest over time': {\n      path: '/trends/api/widgetdata/multiline',\n      pos: 0,\n    },\n    'interest by region': {\n      path: '/trends/api/widgetdata/comparedgeo',\n      pos: 1,\n      resolution: formatResolution(obj.resolution),\n    },\n    'related topics': {\n      path: '/trends/api/widgetdata/relatedsearches',\n      pos: 2,\n    },\n    'related queries': {\n      path: '/trends/api/widgetdata/relatedsearches',\n      pos: 3,\n    },\n  };\n\n  const options = {\n    method: 'GET',\n    host: 'www.google.com',\n    path: '/trends/api/explore',\n    qs: {\n      hl: obj.hl,\n      req: JSON.stringify({comparisonItem: [obj], cat: 0}),\n      tz: 300,\n    },\n  };\n\n  const {pos, path, resolution} = map[searchType];\n\n  return request(options)\n  .then((results) => {\n    const parsedResults = JSON.parse(results.slice(4)).widgets;\n    let req = parsedResults[pos].request;\n\n    if (resolution) req.resolution = resolution;\n    req = JSON.stringify(req);\n    const token = parsedResults[pos].token;\n    const nextOptions = {\n      path,\n      method: 'GET',\n      host: 'www.google.com',\n      qs: {\n        hl: obj.hl,\n        req,\n        token,\n        tz: 300,\n      },\n    };\n\n    return request(nextOptions);\n  })\n  .then((res) => {\n    return res.slice(5);\n  });\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/utilities.js\n **/","module.exports = require(\"https\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"https\"\n ** module id = 75\n ** module chunks = 0\n **/","module.exports = require(\"querystring\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"querystring\"\n ** module id = 95\n ** module chunks = 0\n **/","'use strict';\nimport https from 'https';\nimport querystring from 'querystring';\n\nexport default function request({method, host, path, qs}) {\n  const options = {\n    host,\n    method,\n    path: `${path}?${querystring.stringify(qs)}`,\n  };\n\n  return new Promise((resolve, reject) => {\n    const req = https.request(options, (res) => {\n      let chunk = '';\n\n      res.on('data', (data) => {\n        chunk += data;\n      });\n\n      res.on('end', () => {\n        resolve(chunk.toString('utf8'));\n      });\n    });\n\n    req.on('error', (e) => {\n      reject(e);\n    });\n\n    req.end();\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/request.js\n **/"],"sourceRoot":""}